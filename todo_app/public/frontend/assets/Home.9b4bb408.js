var h=(T,r,i)=>new Promise((x,v)=>{var C=d=>{try{g(i.next(d))}catch(y){v(y)}},o=d=>{try{g(i.throw(d))}catch(y){v(y)}},g=d=>d.done?x(d.value):Promise.resolve(d.value).then(C,o);g((i=i.apply(T,r)).next())});import{_ as S,l as _,c as A,a as N,b as u,d as s,e as b,m as U,u as c,w as f,p as V,v as I,q as E,s as k,t as m,F as P,r as $,o as l,i as p,B as w,j as K,g as B}from"./index.3a76cf4f.js";import{B as z}from"./Badge.18d6f9db.js";import{I as R}from"./Input.3dfc567e.js";const q={class:"min-h-screen bg-gray-50"},G={class:"max-w-4xl mx-auto py-8 px-4"},W={class:"bg-white rounded-lg shadow-sm p-6 mb-6"},J={class:"flex gap-3 mb-4"},Q={key:0,class:"space-y-3 pt-3 border-t"},X={class:"grid grid-cols-2 gap-3"},Y={class:"flex gap-2 mb-6 flex-wrap"},Z={key:0,class:"text-center py-12"},ee={key:1,class:"text-center py-12 bg-white rounded-lg shadow-sm"},te={key:2,class:"space-y-3"},se={class:"flex items-start gap-4"},ae=["checked","onChange"],re={class:"flex-1 min-w-0"},oe={class:"flex items-start justify-between gap-2 flex-wrap"},le={class:"flex items-center gap-2"},ne={key:0,class:"mt-2 text-sm text-gray-600 whitespace-pre-wrap"},ie={class:"mt-2 flex items-center gap-4 text-sm text-gray-500"},ue={key:0,class:"flex items-center gap-1"},de={class:"flex items-center gap-1"},ce={class:"mt-3 flex gap-2"},me={__name:"Home",setup(T){const r=_({title:"",description:"",status:"Open",priority:"Medium",due_date:""}),i=_(!1),x=_(!1),v=_("all"),C=[{label:"All",value:"all"},{label:"Open",value:"Open"},{label:"In Progress",value:"In Progress"},{label:"Completed",value:"Completed"}],o=A({doctype:"Todo Item",fields:["name","task_title","description","status","priority","due_date","creation"],orderBy:"creation desc",auto:!0}),g=N(()=>o.data?v.value==="all"?o.data:o.data.filter(a=>a.status===v.value):[]);function d(a){return o.data?a==="all"?o.data.length:o.data.filter(e=>e.status===a).length:0}function y(){return h(this,null,function*(){if(!r.value.title.trim()){alert("Please enter a task title");return}x.value=!0;try{yield o.insert.submit({task_title:r.value.title,description:r.value.description||"",status:"Open",priority:r.value.priority,due_date:r.value.due_date||null}),r.value={title:"",description:"",status:"Open",priority:"Medium",due_date:""},i.value=!1,yield o.reload()}catch(a){console.error("Error adding task:",a),alert("Failed to add task. Please try again.")}finally{x.value=!1}})}function H(a){return h(this,null,function*(){const e=a.status==="Completed"?"Open":"Completed";yield M(a,e)})}function M(a,e){return h(this,null,function*(){try{yield o.setValue.submit({name:a.name,status:e}),yield o.reload()}catch(t){console.error("Error updating status:",t),alert("Failed to update task status")}})}function L(a){return h(this,null,function*(){if(!!confirm("Are you sure you want to delete this task?"))try{yield o.delete.submit(a.name),yield o.reload()}catch(e){console.error("Error deleting task:",e),alert("Failed to delete task")}})}function O(a){return{High:"red",Medium:"orange",Low:"blue"}[a]||"gray"}function F(a){return{Open:"blue","In Progress":"orange",Completed:"green"}[a]||"gray"}function D(a){return a?new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):""}function j(a){if(!a)return"";const e=new Date(a),t=new Date,n=Math.floor((t-e)/1e3);return n<60?"just now":n<3600?`${Math.floor(n/60)}m ago`:n<86400?`${Math.floor(n/3600)}h ago`:n<604800?`${Math.floor(n/86400)}d ago`:D(a)}return(a,e)=>(l(),u("div",q,[s("div",G,[e[16]||(e[16]=s("div",{class:"mb-8"},[s("h1",{class:"text-4xl font-bold text-gray-900 mb-2"},"My Tasks"),s("p",{class:"text-gray-600"},"Manage your daily tasks efficiently")],-1)),s("div",W,[s("div",J,[b(c(R),{modelValue:r.value.title,"onUpdate:modelValue":e[0]||(e[0]=t=>r.value.title=t),placeholder:"What needs to be done?",class:"flex-1",onKeyup:U(y,["enter"])},null,8,["modelValue"]),b(c(w),{onClick:y,variant:"solid",loading:x.value},{default:f(()=>[...e[5]||(e[5]=[p(" Add Task ",-1)])]),_:1},8,["loading"])]),i.value?(l(),u("div",Q,[V(s("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>r.value.description=t),placeholder:"Add description (optional)",rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[I,r.value.description]]),s("div",X,[s("div",null,[e[7]||(e[7]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Priority",-1)),V(s("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>r.value.priority=t),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},[...e[6]||(e[6]=[s("option",{value:"Low"},"Low",-1),s("option",{value:"Medium"},"Medium",-1),s("option",{value:"High"},"High",-1)])],512),[[E,r.value.priority]])]),s("div",null,[e[8]||(e[8]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Due Date",-1)),V(s("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>r.value.due_date=t),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[I,r.value.due_date]])])])])):k("",!0),s("button",{onClick:e[4]||(e[4]=t=>i.value=!i.value),class:"mt-3 text-sm text-blue-600 hover:text-blue-700 font-medium"},m(i.value?"\u2212 Less options":"+ More options"),1)]),s("div",Y,[(l(),u(P,null,$(C,t=>b(c(w),{key:t.value,onClick:n=>v.value=t.value,variant:v.value===t.value?"solid":"outline",size:"sm"},{default:f(()=>[p(m(t.label)+" ("+m(d(t.value))+") ",1)]),_:2},1032,["onClick","variant"])),64))]),c(o).loading?(l(),u("div",Z,[...e[9]||(e[9]=[s("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1),s("p",{class:"mt-2 text-gray-600"},"Loading tasks...",-1)])])):g.value.length?(l(),u("div",te,[(l(!0),u(P,null,$(g.value,t=>(l(),u("div",{key:t.name,class:"bg-white rounded-lg shadow-sm p-4 hover:shadow-md transition-shadow"},[s("div",se,[s("input",{type:"checkbox",checked:t.status==="Completed",onChange:n=>H(t),class:"mt-1 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer"},null,40,ae),s("div",re,[s("div",oe,[s("h3",{class:K(["text-lg font-medium",t.status==="Completed"?"line-through text-gray-500":"text-gray-900"])},m(t.task_title),3),s("div",le,[t.priority?(l(),B(c(z),{key:0,theme:O(t.priority)},{default:f(()=>[p(m(t.priority),1)]),_:2},1032,["theme"])):k("",!0),b(c(z),{theme:F(t.status)},{default:f(()=>[p(m(t.status),1)]),_:2},1032,["theme"])])]),t.description?(l(),u("p",ne,m(t.description),1)):k("",!0),s("div",ie,[t.due_date?(l(),u("span",ue,[e[11]||(e[11]=s("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),p(" "+m(D(t.due_date)),1)])):k("",!0),s("span",de,[e[12]||(e[12]=s("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),p(" "+m(j(t.creation)),1)])]),s("div",ce,[t.status==="Open"?(l(),B(c(w),{key:0,onClick:n=>M(t,"In Progress"),size:"sm",variant:"outline"},{default:f(()=>[...e[13]||(e[13]=[p(" Start ",-1)])]),_:1},8,["onClick"])):k("",!0),t.status==="In Progress"?(l(),B(c(w),{key:1,onClick:n=>M(t,"Completed"),size:"sm",variant:"outline",theme:"green"},{default:f(()=>[...e[14]||(e[14]=[p(" Complete ",-1)])]),_:1},8,["onClick"])):k("",!0),b(c(w),{onClick:n=>L(t),size:"sm",variant:"outline",theme:"red"},{default:f(()=>[...e[15]||(e[15]=[p(" Delete ",-1)])]),_:1},8,["onClick"])])])])]))),128))])):(l(),u("div",ee,[...e[10]||(e[10]=[s("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),s("h3",{class:"mt-2 text-lg font-medium text-gray-900"},"No tasks yet",-1),s("p",{class:"mt-1 text-gray-500"},"Get started by creating your first task",-1)])]))])]))}};var ye=S(me,[["__scopeId","data-v-1fa31d68"]]);export{ye as default};
