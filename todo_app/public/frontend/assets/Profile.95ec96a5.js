var _=(k,m,u)=>new Promise((s,v)=>{var i=l=>{try{p(u.next(l))}catch(a){v(a)}},f=l=>{try{p(u.throw(l))}catch(a){v(a)}},p=l=>l.done?s(l.value):Promise.resolve(l.value).then(i,f);p((u=u.apply(k,m)).next())});import{l as c,D as $,o as r,b as d,d as t,F as A,r as D,j as L,u as y,t as n,s as T,H as S,E as h,a as M,e as b,w as U,i as B,B as E}from"./index.3a76cf4f.js";import{L as P}from"./list-todo.92486987.js";import{C as N}from"./circle-check-big.f3401082.js";import{C as I}from"./calendar.8cf7a38a.js";import"./createLucideIcon.9c1d2a84.js";const V={class:"theme-switcher"},z={key:0,class:"text-sm text-gray-500"},F={key:1,class:"grid grid-cols-2 gap-3"},H=["onClick"],J={class:"flex items-center justify-between"},O={class:"font-medium text-gray-900"},R={key:0,class:"w-5 h-5 rounded-full bg-blue-500 flex items-center justify-center"},q={key:2,class:"text-sm text-gray-500"},G={__name:"ThemeSwitcher",setup(k){const{currentTheme:m,loadTheme:u,getAvailableThemes:s,saveUserTheme:v}=S(),i=c([]),f=c(!0);$(()=>_(this,null,function*(){i.value=yield s(),f.value=!1}));const p=l=>_(this,null,function*(){(yield u(l))&&(yield v(l))});return(l,a)=>(r(),d("div",V,[a[1]||(a[1]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Theme ",-1)),f.value?(r(),d("div",z," Loading themes... ")):(r(),d("div",F,[(r(!0),d(A,null,D(i.value,g=>(r(),d("button",{key:g.theme_key,onClick:C=>p(g.theme_key),class:L(["p-4 rounded-lg border-2 transition-all",y(m)===g.theme_key?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"])},[t("div",J,[t("span",O,n(g.theme_name),1),y(m)===g.theme_key?(r(),d("div",R,[...a[0]||(a[0]=[t("svg",{class:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)])])):T("",!0)])],10,H))),128))])),!f.value&&i.value.length===0?(r(),d("p",q," No themes available ")):T("",!0)]))}},Q={class:"p-8"},W={key:0,class:"text-center py-12"},X={key:1,class:"max-w-4xl"},Y={class:"bg-white rounded-lg shadow-sm p-8 mb-6"},Z={class:"flex items-start gap-6"},K={class:"flex-shrink-0"},tt={class:"h-24 w-24 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center text-white text-3xl font-bold shadow-lg"},et={class:"flex-1"},st={class:"flex items-center justify-between"},ot={class:"text-2xl font-bold text-gray-900"},lt={class:"text-gray-600 mt-1"},at={class:"grid grid-cols-2 gap-4 mt-6"},nt={class:"text-sm font-medium text-gray-900 mt-1"},it={class:"text-sm font-medium text-gray-900 mt-1"},rt={class:"text-sm font-medium text-gray-900 mt-1"},dt={class:"text-sm font-medium text-gray-900 mt-1"},ut={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6"},ct={class:"bg-white rounded-lg shadow-sm p-6"},mt={class:"flex items-center justify-between"},ft={class:"text-3xl font-bold text-gray-900 mt-1"},pt={class:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center"},gt={class:"bg-white rounded-lg shadow-sm p-6"},xt={class:"flex items-center justify-between"},vt={class:"text-3xl font-bold text-gray-900 mt-1"},_t={class:"w-12 h-12 rounded-full bg-green-100 flex items-center justify-center"},yt={class:"bg-white rounded-lg shadow-sm p-6"},ht={class:"flex items-center justify-between"},bt={class:"text-3xl font-bold text-gray-900 mt-1"},wt={class:"w-12 h-12 rounded-full bg-purple-100 flex items-center justify-center"},kt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ct={class:"bg-white rounded-lg shadow-sm p-6"},St={__name:"Profile",setup(k){const m=c(!0);c(!1);const u=c(!1),s=c({full_name:"",email:"",username:"",user_type:"",creation:"",last_active:""}),v=c({full_name:"",email:""}),i=c({totalTasks:0,completedTasks:0,totalAppointments:0});$(()=>_(this,null,function*(){try{const o=yield h("frappe.auth.get_logged_user"),e=yield h("frappe.client.get",{doctype:"User",name:o});s.value={full_name:e.full_name||e.first_name||"User",email:e.email,username:e.username,user_type:e.user_type,creation:e.creation,last_active:e.last_active||new Date().toISOString()},v.value={full_name:s.value.full_name,email:s.value.email},yield f()}catch(o){console.error("Error fetching profile:",o)}finally{m.value=!1}}));function f(){return _(this,null,function*(){try{const o=yield h("frappe.client.get_count",{doctype:"Todo Item"}),e=yield h("frappe.client.get_count",{doctype:"Todo Item",filters:{status:"Completed"}}),w=yield h("frappe.client.get_count",{doctype:"Appointment"});i.value={totalTasks:o,completedTasks:e,totalAppointments:w}}catch(o){console.error("Error fetching stats:",o)}})}const p=M(()=>s.value.full_name.charAt(0).toUpperCase());function l(){u.value=!0}function a(){window.open("/app/user/"+s.value.email,"_blank")}function g(){return _(this,null,function*(){confirm("Are you sure you want to logout?")&&(window.location.href="/api/method/logout")})}function C(o){return o?new Date(o).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"N/A"}function j(o){if(!o)return"Just now";const e=new Date(o),w=new Date,x=Math.floor((w-e)/1e3);return x<60?"Just now":x<3600?`${Math.floor(x/60)}m ago`:x<86400?`${Math.floor(x/3600)}h ago`:x<604800?`${Math.floor(x/86400)}d ago`:C(o)}return(o,e)=>(r(),d("div",Q,[e[16]||(e[16]=t("h1",{class:"text-3xl font-bold text-gray-900 mb-8"},"Profile",-1)),m.value?(r(),d("div",W,[...e[1]||(e[1]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1),t("p",{class:"mt-2 text-gray-600"},"Loading profile...",-1)])])):(r(),d("div",X,[t("div",Y,[t("div",Z,[t("div",K,[t("div",tt,n(p.value),1)]),t("div",et,[t("div",st,[t("div",null,[t("h2",ot,n(s.value.full_name),1),t("p",lt,n(s.value.email),1)]),b(y(E),{onClick:e[0]||(e[0]=w=>u.value=!0),variant:"outline"},{default:U(()=>[...e[2]||(e[2]=[B(" Edit Profile ",-1)])]),_:1})]),t("div",at,[t("div",null,[e[3]||(e[3]=t("p",{class:"text-sm text-gray-500"},"User Type",-1)),t("p",nt,n(s.value.user_type||"System User"),1)]),t("div",null,[e[4]||(e[4]=t("p",{class:"text-sm text-gray-500"},"Username",-1)),t("p",it,n(s.value.username||s.value.email),1)]),t("div",null,[e[5]||(e[5]=t("p",{class:"text-sm text-gray-500"},"Member Since",-1)),t("p",rt,n(C(s.value.creation)),1)]),t("div",null,[e[6]||(e[6]=t("p",{class:"text-sm text-gray-500"},"Last Active",-1)),t("p",dt,n(j(s.value.last_active)),1)])])])])]),t("div",ut,[t("div",ct,[t("div",mt,[t("div",null,[e[7]||(e[7]=t("p",{class:"text-sm text-gray-600"},"Total Tasks",-1)),t("p",ft,n(i.value.totalTasks),1)]),t("div",pt,[b(y(P),{class:"w-6 h-6 text-blue-600"})])])]),t("div",gt,[t("div",xt,[t("div",null,[e[8]||(e[8]=t("p",{class:"text-sm text-gray-600"},"Completed",-1)),t("p",vt,n(i.value.completedTasks),1)]),t("div",_t,[b(y(N),{class:"w-6 h-6 text-green-600"})])])]),t("div",yt,[t("div",ht,[t("div",null,[e[9]||(e[9]=t("p",{class:"text-sm text-gray-600"},"Appointments",-1)),t("p",bt,n(i.value.totalAppointments),1)]),t("div",wt,[b(y(I),{class:"w-6 h-6 text-purple-600"})])])])]),t("div",kt,[t("div",Ct,[e[12]||(e[12]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"}," Appearance ",-1)),b(G),e[13]||(e[13]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4 mt-6"}," Settings ",-1)),t("div",{class:"space-y-3"},[t("button",{onClick:a,class:"w-full py-3 px-4 bg-gray-50 rounded-lg text-left hover:bg-gray-100 transition-colors flex items-center gap-3"},[...e[10]||(e[10]=[t("span",{class:"font-medium"},"Change Password",-1)])]),t("button",{onClick:l,class:"w-full py-3 px-4 bg-gray-50 rounded-lg text-left hover:bg-gray-100 transition-colors flex items-center gap-3"},[...e[11]||(e[11]=[t("span",{class:"font-medium"},"Edit Profile",-1)])])])]),t("div",{class:"bg-white rounded-lg shadow-sm p-6"},[e[15]||(e[15]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"}," Help & Support ",-1)),t("div",{class:"space-y-3"},[t("button",{onClick:g,class:"w-full py-3 px-4 bg-red-50 text-red-600 rounded-lg text-left hover:bg-red-100 transition-colors flex items-center gap-3"},[...e[14]||(e[14]=[t("span",{class:"font-medium"},"Logout",-1)])])])])])]))]))}};export{St as default};
